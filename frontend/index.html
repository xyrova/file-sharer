<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FileSharer - Secure File Sharing</title> <!-- Improved Title -->
  <link rel="stylesheet" href="styles.css">
  <script src="script.js" defer></script>
</head>
<body>
  <!-- Page header -->
  <header class="page-header"> <!-- Added class for specific styling -->
    <h1>FileSharer</h1>
    <p>Upload and download files securely using 4-digit PIN codes</p>
  </header>

  <!-- Main content -->
  <main class="container">
    <!-- FileSharer Card -->
    <section class="card file-sharer-card" aria-labelledby="card-heading"> <!-- Added aria-labelledby -->
      <h2 id="card-heading">Share or Retrieve Your Files</h2> <!-- Improved heading -->
      <!-- Upload and Download buttons inside the same transparent card -->
      <div class="card-actions"> <!-- Wrapper for buttons -->
        <button class="file-button upload-button" onclick="openModal('uploadModal')" aria-label="Upload a file">Upload File</button> <!-- Added class and aria-label -->
        <button class="file-button download-button" onclick="openModal('downloadModal')" aria-label="Download a file using a PIN">Download File</button> <!-- Added class and aria-label -->
      </div>
    </section>
  </main>

  <!-- Modal for Upload functionality -->
  <div id="uploadModal" class="modal" aria-labelledby="upload-heading" aria-modal="true" role="dialog"> <!-- Added ARIA attributes -->
    <div class="modal-content">
      <h2 id="upload-heading">Upload a File</h2>
      <div class="loading-spinner" id="uploadSpinner" style="display: none;"></div> <!-- Loading Spinner -->
      <input type="file" id="uploadInput" aria-label="Choose file to upload">
      <button class="modal-button" onclick="uploadFile()" aria-label="Confirm file upload">Upload</button>
      <p class="error-message" id="uploadError" aria-live="assertive"></p> <!-- Added aria-live -->
      <p class="success-message" id="uploadMessage" aria-live="assertive"></p> <!-- Added aria-live -->
      <!-- PIN Display and Copy Button -->
      <div id="pinContainer" style="display:none;">
        <p>Your download PIN: <strong id="downloadPin"></strong></p> <!-- Use strong for emphasis -->
        <button id="copyPinButton" class="copy-button" onclick="copyPin()" aria-label="Copy download PIN to clipboard">Copy PIN</button> <!-- Added class -->
      </div>
      <button class="modal-button close-button" onclick="closeModal('uploadModal')" aria-label="Close upload dialog">Close</button> <!-- Added class -->
    </div>
  </div>

  <!-- Modal for Download functionality -->
  <div id="downloadModal" class="modal" aria-labelledby="download-heading" aria-modal="true" role="dialog"> <!-- Added ARIA attributes -->
    <div class="modal-content">
      <h2 id="download-heading">Download a File</h2>
      <div class="loading-spinner" id="downloadSpinner" style="display: none;"></div> <!-- Loading Spinner -->
      <input type="text" id="pinInput" placeholder="Enter 4-digit PIN" inputmode="numeric" pattern="[0-9]{4}" maxlength="4" aria-label="Enter 4-digit PIN for download"> <!-- Added inputmode, pattern, maxlength -->
      <button class="modal-button" onclick="downloadFile()" aria-label="Confirm file download with PIN">Download</button>
      <p class="error-message" id="downloadError" aria-live="assertive"></p> <!-- Added aria-live -->
      <p class="success-message" id="downloadMessage" aria-live="assertive"></p> <!-- Added aria-live -->
      <button class="modal-button close-button" onclick="closeModal('downloadModal')" aria-label="Close download dialog">Close</button> <!-- Added class -->
    </div>
  </div>

  <!-- Page Footer -->
  <footer class="page-footer">
    <p>&copy; 2025 FileSharer. All rights reserved.</p>
  </footer>
</body>
</html>